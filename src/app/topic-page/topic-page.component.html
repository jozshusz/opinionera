<div class="page_container">
  <div class="topic_container">
    <div>
      <h1 class="page_title"> {{ currentTopic.name }} </h1>
      <h2 class="sub_title"> {{ currentTopic.description }} </h2>
    </div>
    <div *ngIf="isLoggedIn" class="new_post">
      <button type="button" class="btn btn-dark" (click)="newPostButton()">Téma nyitás</button>
      <div *ngIf="newPost" class="input-area">
        <form [formGroup]="postForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <input type="text" formControlName="postTitle" 
            class="form-control" placeholder="Téma címe"
            [ngClass]="{ 'is-invalid': submitted && f.postTitle.errors }"/>
            <div *ngIf="submitted && f.postTitle.errors" class="invalid-feedback">
                <div *ngIf="f.postTitle.errors.required">A cím kitöltése kötelező</div>
            </div>
            <textarea type="text" placeholder="A téma leírása" 
              formControlName="postDescription" id="postDescription" rows="2" 
              class="form-control" [ngClass]="{ 'is-invalid': submitted && f.postDescription.errors }">
            </textarea>
            <div *ngIf="submitted && f.postDescription.errors" class="invalid-feedback">
              <div *ngIf="f.postDescription.errors.required">Adj meg egy pár szavas leírást</div>
            </div>
          </div>
          <div class="form-group">
            <button class="btn btn-dark">A téma létrehozása</button>
          </div>
        </form>
      </div>
    </div>
    <mat-list>
      <div mat-subheader>Posztok</div>
      <mat-list-item  *ngFor="let post of currentPostList">
        <div class="container">
          <div class="row">
            <div class="col">
              <div mat-line> 
                <a [routerLink]="['./', post.id]"> {{ post.name }} </a>
              </div>
              <div mat-line> {{ post.description }} </div>
            </div>
            <div class="col">
              <a [routerLink]="['./', post.id, {comment: post.last_comment_id}]">
                {{ post.last_comment_date }}
                {{ post.last_comment_user }}
              </a>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
      </mat-list-item>
    </mat-list>
  </div>
</div>
